<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Morning Change Count</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #aaaaaa;
      color: #e5e7eb;
      padding: 20px;
    }
    h1 { text-align: center; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #374151;
      padding: 8px;
      text-align: right;
    }
    th { background: #1f2937; }
    td:first-child, th:first-child { text-align: left; }
    input[type="number"] {
      width: 100px;
      padding: 5px;
      border-radius: 5px;
      border: 1px solid #374151;
      background: #0f172a;
      color: #f9fafb;
      text-align: right;
    }
    tfoot td {
      font-weight: bold;
      background: #1f2937;
    }
  </style>
</head>
<body>
  <h1>Morning Change Count</h1>
  <table>
    <thead>
      <tr>
        <th>Coin</th>
        <th>Drawer 1</th>
        <th>Drawer 2</th>
        <th>Drawer 3</th>
      </tr>
    </thead>
    <tbody id="rows"></tbody>
    <tfoot>
      <tr>
        <td>Total</td>
        <td id="total1">$0.00</td>
        <td id="total2">$0.00</td>
        <td id="total3">$0.00</td>
      </tr>
    </tfoot>
  </table>

  <script>
    // Start with quarters and go down to pennies for tab order
    const coins = [
      { name: 'Quarters', value: 0.25 },
      { name: 'Dimes', value: 0.10 },
      { name: 'Nickels', value: 0.05 },
      { name: 'Pennies', value: 0.01 }
    ];

    const tbody = document.getElementById('rows');
    coins.forEach((c, i) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${c.name}</td>
        <td><input type="number" min="0" id="d1-${i}" oninput="calc()"></td>
        <td><input type="number" min="0" id="d2-${i}" oninput="calc()"></td>
        <td><input type="number" min="0" id="d3-${i}" oninput="calc()"></td>
      `;
      tbody.appendChild(row);
    });

    function focusAndSelect(el){ if(!el) return; el.focus(); el.select?.(); }

    // Set tab order up and down each column, select text on focus
    window.addEventListener('DOMContentLoaded', () => {
      [1, 2, 3].forEach(drawer => {
        coins.forEach((_, i) => {
          const cur = document.getElementById(`d${drawer}-${i}`);
          const nextDown = document.getElementById(`d${drawer}-${i + 1}`);
          const nextUp   = document.getElementById(`d${drawer}-${i - 1}`);

          // Select all text when focused (also on click)
          cur.addEventListener('focus', e => e.target.select());
          cur.addEventListener('mouseup', e => { // prevent mouseup from clearing selection
            e.preventDefault();
          });

          cur.addEventListener('keydown', e => {
            if (e.key !== 'Tab') return; // not our concern

            // SHIFT+TAB (move up in same drawer, or wrap to previous drawer's bottom)
            if (e.shiftKey) {
              if (nextUp) {
                e.preventDefault();
                focusAndSelect(nextUp);
              } else {
                // At top of this drawer; wrap to previous drawer's bottom if available
                const prevDrawer = drawer - 1;
                if (prevDrawer >= 1) {
                  e.preventDefault();
                  const wrap = document.getElementById(`d${prevDrawer}-${coins.length - 1}`);
                  focusAndSelect(wrap);
                } // else let browser default (move to header / outside table)
              }
              return;
            }

            // TAB (move down in same drawer, or wrap to next drawer's top)
            if (!e.shiftKey) {
              if (nextDown) {
                e.preventDefault();
                focusAndSelect(nextDown);
              } else {
                const nextDrawer = drawer + 1;
                if (nextDrawer <= 3) {
                  e.preventDefault();
                  const wrap = document.getElementById(`d${nextDrawer}-0`);
                  focusAndSelect(wrap);
                } // else at bottom of last drawer: allow natural tab to next focusable
              }
            }
          });
        });
      });

      // Put initial focus on Drawer 1 / Quarters for speed entry
      const first = document.getElementById('d1-0');
      if (first) focusAndSelect(first);
    });

    function calc() {
      let totals = [0, 0, 0];
      coins.forEach((c, i) => {
        [1, 2, 3].forEach(j => {
          const count = parseFloat(document.getElementById(`d${j}-${i}`).value) || 0;
          totals[j - 1] += count * c.value;
        });
      });
      document.getElementById('total1').textContent = totals[0].toLocaleString('en-US', { style: 'currency', currency: 'USD' });
      document.getElementById('total2').textContent = totals[1].toLocaleString('en-US', { style: 'currency', currency: 'USD' });
      document.getElementById('total3').textContent = totals[2].toLocaleString('en-US', { style: 'currency', currency: 'USD' });
    }
  </script>
</body>
</html>
