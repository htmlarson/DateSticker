<!DOCTYPE html>
<!-- 

  ********************************************
  * I verify that this feature should        *
  * already exist inside POS:                *
  *                                          *
  * ‚úÖ VERIFIED                              *
  * Made by Andrew Larson                    *
  * With help from ChatGPT                   *
  * Version 1.0                              *
  ********************************************


--> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="initial-scale=1.0, width=device-width, user-scalable=no"/>
  <meta name="apple-mobile-web-app-capable" content="no"/>
  <meta name="apple-mobile-web-app-title" content="Stickers!"/>
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Stickers! A Quick, Visual Month and Week Reference"/>
  <meta property="og:description" content="A quick, visual refrence for the current month/week to put on your verification sticker.">
  <meta property="og:image" content="/stickers_og_image.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <title>Sticker Calendar</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f0f0f0;
      font-family: Arial, sans-serif;
      margin: 0;
      flex-direction: column;
      overflow: hidden; /* So that falling emojis won't cause scrolling */
    }
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #070D0D;
        color: white;
      }
    }
    .date-display {
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .sticker {
      background-color: #008000;
      color: black;
      width: 350px;
      height: 202px;
      padding: 10px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 5px 5px 10px rgba(0,0,0,0.2);
      font-weight: bold;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: background-color 0.5s ease-in-out;
      z-index: 100; /* Ensure sticker is above falling emojis */
    }
    .header {
      display: flex;
      justify-content: space-between;
      font-size: 1.2em;
    }
    .location {
      display: flex;
      justify-content: space-between;
      font-size: 1.1em;
      border-bottom: 3px solid black;
      margin-top: -1em;
      padding-bottom: 2px;
    }
    .months {
      display: flex;
      justify-content: space-between;
      font-size: 1.4em;
      padding: 0 8px;
    }
    .months.second-row {
      font-size: 1.2em;
      padding: 0 20px;
    }
    .weeks {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.5em;
      padding: 0 8px;
    }
    #name {
      text-transform: capitalize;
    }
    #state {
      text-transform: uppercase;
    }

    .month,
    .week,
    .wk-label {
      border: 2px hidden black;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      transition: opacity 5s ease-in-out;
    }
    .wk-label {
      border: none;
    }
    .highlight {
      opacity: 1;
      color: white;
      background-color: black;
    }
    .faded {
      opacity: 0.2;
    }
    select {
      margin-top: 20px;
      z-index: 101; /* Above emojis */
    }

    /* Menu that appears when "I like fun" is selected */
    #funMenu {
      display: none;
      margin-top: 20px;
      text-align: center;
      z-index: 101;
    }

    /* The container that holds the color picker and rain checkbox, toggled by a link */
    #funOptions {
      display: none;
      margin-top: 10px;
    }

    #colorPicker {
      width: 60px;
      height: 40px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 10px;
      vertical-align: middle;
    }

    /* Keyframes for falling emojis. They fade in then fall quickly to the bottom. */
    @keyframes gravityFall {
      0% {
        transform: translateY(-10%);
        opacity: 0;
      }
      5% {
        opacity: 0.5;
      }
      100% {
        transform: translateY(120%);
        opacity: 0.5;
      }
    }

    .raindrop {
      position: fixed;
      top: -50px;
      font-size: 24px;
      opacity: 0.5;
      animation-name: gravityFall;
      animation-timing-function: cubic-bezier(0.2, 0.7, 0.4, 1);
      pointer-events: none;
    }
  </style>
  <script>
    let rainInterval = null; // For continuous raining

    function changeStickerType() {
      const select = document.getElementById("stickerType");
      const selectedType = select.value;
      const sticker = document.querySelector(".sticker");
      const funMenu = document.getElementById("funMenu");

      if (selectedType) {
        localStorage.setItem("stickerType", selectedType);
        sticker.style.transition = "background-color 0.5s ease-in-out";

        if (selectedType === "center") {
          funMenu.style.display = "none";
          stopRain();
          sticker.style.backgroundColor = "#008000";
        } else if (selectedType === "dealer") {
          funMenu.style.display = "none";
          stopRain();
          sticker.style.backgroundColor = "#FFD700";
        } else if (selectedType === "fun") {
          // Show the fun menu
          funMenu.style.display = "block";
          // Load previous color if any
          const storedColor = localStorage.getItem("stickerColor") || "#008000";
          sticker.style.backgroundColor = storedColor;
          // If user had the rain checkbox set, resume raining
          const wasRaining = localStorage.getItem("rainActive") === "true";
          if (wasRaining) {
            document.getElementById("rainCheckbox").checked = true;
            startRain();
          }
        }
        select.value = "";
      }
    }

    function loadStickerType() {
      const storedType = localStorage.getItem("stickerType");
      const sticker = document.querySelector(".sticker");
      const funMenu = document.getElementById("funMenu");

      funMenu.style.display = "none";
      stopRain();

      if (storedType === "center") {
        sticker.style.backgroundColor = "#008000";
      } else if (storedType === "dealer") {
        sticker.style.backgroundColor = "#FFD700";
      } else if (storedType === "fun") {
        funMenu.style.display = "block";
        const storedColor = localStorage.getItem("stickerColor") || "#008000";
        sticker.style.backgroundColor = storedColor;
        // Possibly resume raining
        const wasRaining = localStorage.getItem("rainActive") === "true";
        if (wasRaining) {
          document.getElementById("rainCheckbox").checked = true;
          startRain();
        }
      }
    }

    function highlightDate() {
      const currentDate = new Date();
      const monthIndex = currentDate.getMonth();
      const week = Math.ceil(currentDate.getDate() / 7);
      const monthElements = document.querySelectorAll('.month');
      const weekElements = document.querySelectorAll('.week');

      monthElements.forEach((el, index) => {
        setTimeout(() => {
          el.classList.toggle('highlight', index === monthIndex);
          el.classList.toggle('faded', index !== monthIndex);
        }, 100);
      });

      weekElements.forEach((el, index) => {
        setTimeout(() => {
          el.classList.toggle('highlight', index === week - 1);
          el.classList.toggle('faded', index !== week - 1);
        }, 100);
      });
    }

    function saveField(id) {
      localStorage.setItem(id, document.getElementById(id).innerText);
    }

    function loadFields() {
      ['name', 'location-number', 'state'].forEach(id => {
        const storedValue = localStorage.getItem(id);
        if (storedValue) {
          document.getElementById(id).innerText = storedValue;
        }
      });
    }

    // Repeatedly spawn single drops
    function startRain() {
      if (!rainInterval) {
        // Mark in storage
        localStorage.setItem("rainActive", "true");
        rainInterval = setInterval(() => {
          spawnRaindrop();
        }, 300); // spawn faster for a heavier rain effect
      }
    }

    function stopRain() {
      if (rainInterval) {
        clearInterval(rainInterval);
        rainInterval = null;
      }
      // Mark in storage
      localStorage.setItem("rainActive", "false");
    }

    function spawnRaindrop() {
      let rainContainer = document.getElementById('rain-container');
      if(!rainContainer){
        rainContainer = document.createElement('div');
        rainContainer.id = 'rain-container';
        rainContainer.style.position = 'fixed';
        rainContainer.style.top = 0;
        rainContainer.style.left = 0;
        rainContainer.style.width = '100%';
        rainContainer.style.height = '100%';
        rainContainer.style.overflow = 'hidden';
        rainContainer.style.zIndex = 1;
        document.body.appendChild(rainContainer);
      }

      const emojis = ['üöö','üõû','üîß','‚úÖ','üß∞','üî©','‚öôÔ∏è','üì¶'];
      const drop = document.createElement('div');
      drop.classList.add('raindrop');
      drop.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      drop.style.left = (Math.random() * 100) + '%';
      const duration = 2 + Math.random()*3; // 2 to 5 seconds for a faster fall
      drop.style.animationDuration = duration + 's';
      // random initial offset so not everything starts at once
      drop.style.animationDelay = (Math.random()*1) + 's';
      rainContainer.appendChild(drop);

      // remove the drop after animation completes
      drop.addEventListener('animationend', () => {
        drop.remove();
      });
    }

    function toggleFunOptions() {
      const funOptions = document.getElementById('funOptions');
      const link = document.getElementById('toggleFunOptionsLink');
      if (funOptions.style.display === 'none') {
        funOptions.style.display = 'block';
        link.textContent = 'Hide Fun Options';
      } else {
        funOptions.style.display = 'none';
        link.textContent = 'Show Fun Options';
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Rain checkbox logic
      const rainCheckbox = document.getElementById("rainCheckbox");
      rainCheckbox.addEventListener('change', function() {
        if(this.checked) {
          startRain();
        } else {
          stopRain();
        }
      });

      // Add event listener for color picker
      const colorPicker = document.getElementById("colorPicker");
      colorPicker.addEventListener('input', function() {
        const sticker = document.querySelector(".sticker");
        sticker.style.backgroundColor = this.value;
        localStorage.setItem("stickerColor", this.value);
        localStorage.setItem("stickerType", "fun");
      });

      document.getElementById('date-display').innerText = new Date().toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' });
      loadStickerType();
      highlightDate();
      loadFields();
    });
  </script>
</head>
<body>
  <div class="date-display" id="date-display"></div>
  <div class="sticker">
    <div class="header">
      <span id="name" contenteditable="true" onblur="saveField('name')">Doe, John</span>
    </div>
    <div class="location">
      <span id="location-number" contenteditable="true" onblur="saveField('location-number')">759-059</span>
      <span id="state" contenteditable="true" onblur="saveField('state')">AZ</span>
    </div>
    <div class="months">
      <span class="month">J</span>
      <span class="month">F</span>
      <span class="month">M</span>
      <span class="month">A</span>
      <span class="month">M</span>
      <span class="month">J</span>
    </div>
    <div class="months second-row">
      <span class="month">J</span>
      <span class="month">A</span>
      <span class="month">S</span>
      <span class="month">O</span>
      <span class="month">N</span>
      <span class="month">D</span>
    </div>
    <div class="weeks">
      <span class="wk-label">(WK)</span>
      <span class="week">1</span>
      <span class="week">2</span>
      <span class="week">3</span>
      <span class="week">4</span>
      <span class="week">5</span>
    </div>
  </div>

  <select id="stickerType" onchange="changeStickerType()">
    <option value="">Change Sticker Type</option>
    <option value="center">Center</option>
    <option value="dealer">Dealer</option>
    <option value="fun">I like fun</option>
  </select>

  <!-- Hidden "fun menu" that appears when "I like fun" is selected -->
  <div id="funMenu">
    <a href="#" id="toggleFunOptionsLink" onclick="toggleFunOptions(); return false;">Show Fun Options</a>
    <div id="funOptions">
      <div style="margin-bottom: 10px;">
        <label for="colorPicker">Sticker color:</label>
        <input type="color" id="colorPicker" name="colorPicker" />
      </div>
      <div>
        <label for="rainCheckbox">Make it rain?</label>
        <input type="checkbox" id="rainCheckbox" />
      </div>
    </div>
  </div>
</body>
</html>
